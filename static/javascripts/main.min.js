(function(a){a(document).ready(function(){String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(a,c){c=c||0;return this.lastIndexOf(a,c)===c}});a(".error").hide();jQuery("#countdown_dashboard").countDown({targetDate:{day:23,month:5,year:2015,hour:0,min:0,sec:0}});a(".party-container").on("click","a",function(b){a("#party-popup").modal();var c=.6*a(window).height();a(".modal-body").css("height",c);b.preventDefault();
b.stopPropagation()});var l=!1,p=/^\d+$/,q=function(){var b=!0,c=a.trim(a("#rsvpId").val());c&&p.test(c)?(a("#rsvpId-error").hide(),a("#rsvpId").val(c)):(a("#rsvpId-error").show(),b=!1);(c=a.trim(a("#first1").val()))?(a("#first1-error").hide(),a("#first1").val(c)):(a("#first1-error").show(),b=!1);(c=a.trim(a("#last1").val()))?(a("#last1-error").hide(),a("#last1").val(c)):(a("#last1-error").show(),b=!1);return b},m=function(){var b=!0;a("#rsvpwrap li").each(function(c,d){var f=a(d).children("a"),e=
f.attr("href");var e=e.charAt(e.length-1),g=!0,h=a.trim(a("#gFirst"+e).val()),k=a("#gAttending"+e).val();if(""!==h||"-1"!==k)h?(a("#error-gFirst"+e).hide(),a("#gFirst"+e).val(h)):(a("#error-gFirst"+e).show(),g=!1),"-1"!==k?a("#error-attending"+e).hide():(a("#error-attending"+e).show(),g=!1),"1"==k&&("-1"!==a("#gFood"+e).val()?a("#error-food"+e).hide():(a("#error-food"+e).show(),g=!1));b=g;b?f.removeClass("guestError"):f.addClass("guestError")});return b},r=function(b){a.ajax({url:b,type:"GET",cache:!1,
timeout:5E3}).done(function(b,d,f){d=a("#rsvpwrap h3");d.length&&d.remove();f.responseText?(a("#rsvp-reply-form").replaceWith(b),a(".error").hide()):a("#rsvp-reply-form").replaceWith("<h3>Doh! It seems the gremlins have done something. The server has vanished. Please come back later and try again. Worst-case snail mail wins.</h3>")}).fail(function(b,d,f){d=a("#rsvpwrap h3");d.length&&d.remove();b.responseText?(a("#rsvp-reply-form").replaceWith(b.responseText),a(".error").hide()):a("#rsvp-reply-form").replaceWith("<h3>Doh! It seems the gremlins have done something. The server has vanished. Please come back later and try again. Worst-case snail mail wins.</h3>")})};
a("#rsvpwrap").on("change","select",function(b){var c=a(b.target);b=c.attr("id");var c=c.val(),d=b.charAt(b.length-1);b.startsWith("gAttending")?"1"===c?(a("#foodBox"+d).slideDown(),a("#error-attending"+d).hide()):"0"===c&&(a("#foodBox"+d).slideUp(),a("#gFood"+d).val("-1"),a("#error-attending"+d).hide()):b.startsWith("gFood")&&"-1"!==c&&a("#error-food"+d).hide();l&&m()});a("#rsvpwrap").on("focus",".text-input, select",function(){a(this).css({border:"2px solid #de675f"});a(this).css({background:"#fff"})});
a("#rsvpwrap").on("blur",".text-input, select",function(){a(this).css({border:"2px solid #fff"});a(this).css({background:"transparent"})});a("#rsvpwrap").on("click","a",function(b){b.preventDefault();b=a(b.target);var c=a("#"+b.attr("href")),d=a("#rsvpwrap li.active"),f=a("#"+d.children("a").attr("href"));d.removeClass("active");b.parent().addClass("active");f.slideUp().fadeOut();c.slideDown().fadeIn()});a("#rsvpwrap").on("submit","#start-rsvp",function(b){b.preventDefault();if(q()){a("#start-rsvp-btn").prop("disabled",
!0);b=a(this);var c=b.serialize().toLowerCase();a.ajax({url:b.attr("action"),type:b.attr("method"),cache:!1,data:c,timeout:5E3}).done(function(b,c,e){(b=e.getResponseHeader("Location"))?r(b):a("#rsvp-reply-form").replaceWith("<h3>Doh! It seems the gremlins have done something. The server has vanished. Please come back later and try again. Worst-case snail mail wins.</h3>")}).fail(function(b,c,e){c=a("#rsvpwrap h3");c.length&&c.remove();b.responseText?(a("#rsvp-reply-form").replaceWith(b.responseText),
a(".error").hide()):a("#rsvp-reply-form").replaceWith("<h3>Doh! It seems the gremlins have done something. The server has vanished. Please come back later and try again. Worst-case snail mail wins.</h3>")})}});var t=function(b){var c=b.serializeArray(),d=[];for(b=0;b<c.length;b++){var f=c[b].name.toLowerCase();"invitation.id"!==f&&"hmac.hash"!==f&&"hmac.stamp"!==f&&"invitation.confirmaddr.address"!==f||d.push(c[b])}a(".guestInfo").each(function(b){if(""!==a.trim(a("#gFirst"+b).val())){var f=c.filter(function(a){return a.name.toLowerCase().startsWith("invitation.guests."+
b)});Array.prototype.push.apply(d,f)}});return a.param(d).toLowerCase()};a("#rsvpwrap").on("submit","#rsvp-reply",function(b){b.preventDefault();b=m();l=!b;if(b){a("#reply-submit-btn").prop("disabled",!0);b=a(this);var c=t(b);a.ajax({url:b.attr("action"),type:b.attr("method"),cache:!1,data:c,timeout:5E3}).done(function(b,c,e){b=a("#rsvpwrap h3");b.length&&b.remove();200===e.status?(a("#rsvp-reply-form").replaceWith("<h1>Thank you for taking the time to RSVP!</h1>"),a("a[href='#rsvp']").trigger("click")):
a("#rsvp-reply-form").replaceWith("<h3>Doh! It seems the gremlins have done something. Please come back later and try again. Worst-case snail mail wins.</h3>")}).fail(function(b,c,e){c=a("#rsvpwrap h3");c.length&&c.remove();b.responseText?(a("#rsvp-reply-form").replaceWith(b.responseText),a(".error").hide()):a("#rsvp-reply-form").replaceWith("<h3>Doh! It seems the gremlins have done something. The server has vanished. Please come back later and try again. Worst-case snail mail wins.</h3>")})}});var h=
a(window).height();a(".hero").height(h);a(window).resize(function(){var b=a(window).height();a(".hero").height(b)});a("#menuToggle, .menu-close").on("click",function(){a("#menuToggle").toggleClass("active");a("body").toggleClass("body-push-toleft");a("#theMenu").toggleClass("menu-open")});new Photostack(document.getElementById("photostack"),{callback:function(a){}});for(var h="after-the-proposal anna-jason-wedding apple-picking-us audreys-party billies-wedding brewery charger-game-nj chophouse coti-1 cp-1 cp-2 cp-3 cp-4 cp-5 cp-6 cruise-dinner dinner1 du-27th-1 du-27th-2 du-grad engage-1 engage-2 engage-3 engage-4 engage-5 engage-6 erica-eli-wedding first-date-kinda-2 first-date-kinda flat-iron hall-of-fame magic-mountain maine-1 maine-2 mi-tailgate navy-pier new-years-2008 no-clue-1 nyc-skating paris-1 paris-2 proposal rushmore sd-1 seattle shake-shack sig-kappa-us snowboarding the-beginning tx-fishing vegas1 vegas2 yankee-game du-30th magic-mountain-2".split(" "),
g=[];12!=g.length;){var n=Math.floor(Math.random()*h.length);-1===g.indexOf(h[n])&&g.push(h[n])}a("#photostack a").each(function(b){a(this).attr("href","/static/images/placeholders/600x500/"+g[b]+".jpg")});a("#photostack img").each(function(b){a(this).attr("src","/static/images/placeholders/240x240/"+g[b]+".jpg");a(this).attr("alt",g[b])});a(".photostack").magnificPopup({delegate:"a",type:"image",tLoading:"Loading image #%curr%...",mainClass:"mfp-img-mobile",gallery:{enabled:!0,navigateByImgClick:!0,
preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(a){return a.el.attr("title")}}});jQuery.supersized({slide_interval:3E3,transition:1,transition_speed:700,slide_links:"blank",slides:[{image:"/static/images/placeholders/slider-0.jpg"},{image:"/static/images/placeholders/slider-1.jpg"},{image:"/static/images/placeholders/slider-2.jpg"},{image:"/static/images/placeholders/slider-3.jpg"},{image:"/static/images/placeholders/slider-4.jpg"},{image:"/static/images/placeholders/slider-5.jpg"}]})})})(jQuery);